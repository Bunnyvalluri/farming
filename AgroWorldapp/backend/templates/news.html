{% extends "base.html" %}

{% block content %}
<section class="py-12 px-4 sm:px-6 lg:px-8 max-w-5xl mx-auto">
  <div class="mb-12 text-center md:text-left">
    <h2 class="text-4xl font-outfit font-extrabold text-slate-900 mb-2" data-key="news_page_title">Live Farming News
    </h2>
    <p class="text-slate-500 font-medium" data-key="news_page_desc">Get the latest updates from the world of agriculture
      and policy.</p>
  </div>

  <!-- Search Header -->
  <div class="relative mb-12 group">
    <div class="absolute inset-0 bg-primary-600/5 blur-3xl -z-10 rounded-full"></div>
    <form action="/news" method="GET" class="flex flex-col sm:flex-row gap-3">
      <div class="relative grow">
        <input type="text" name="q" placeholder="Explore real news... (e.g. Wheat, Subsidies, Monsoons)"
          value="{% if query != 'agriculture OR farming india' %}{{ query }}{% endif %}"
          class="w-full pl-12 pr-4 py-4 bg-white border border-slate-200 rounded-2xl focus:ring-4 focus:ring-primary-100 focus:border-primary-500 transition-all outline-none font-medium shadow-sm">
        <i
          class="fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary-600 transition-colors"></i>
      </div>
      <button type="submit" id="newsSubmitBtn"
        onclick="this.form.submit(); this.disabled=true; this.querySelector('.btn-label').classList.add('hidden'); this.querySelector('.loading-spinner').classList.remove('hidden');"
        class="px-8 py-4 bg-primary-600 text-white rounded-2xl font-bold hover:bg-primary-700 shadow-lg shadow-primary-600/20 transition-all hover:-translate-y-0.5 whitespace-nowrap min-w-[160px] flex items-center justify-center gap-3 active:scale-95"
        data-key="news_search_btn">
        <span class="btn-label" data-key="news_search_btn">Find Updates</span>
        <div class="loading-spinner hidden w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin">
        </div>
      </button>
    </form>
  </div>

  <!-- News List -->
  <div class="space-y-8">
    {% for item in news %}
    <article
      class="flex flex-col lg:flex-row gap-8 bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-500 group">
      <!-- Image Column -->
      <div class="lg:w-1/3 h-64 lg:h-auto overflow-hidden rounded-[2rem] relative">
        <img src="{{ item.img }}" alt="{{ item.title }}"
          class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700">
        <div class="absolute top-4 left-4">
          <span
            class="px-4 py-1.5 backdrop-blur-md bg-white/20 border border-white/30 text-white text-[10px] font-black uppercase tracking-widest rounded-full shadow-lg">
            {{ item.category }}
          </span>
        </div>
      </div>

      <!-- Content Column -->
      <div class="flex-1 flex flex-col justify-between py-2">
        <div>
          <div class="flex items-center gap-4 text-xs font-bold text-slate-400 mb-4 uppercase tracking-tighter">
            <span class="text-primary-600 flex items-center gap-1.5"><i class="fa-solid fa-newspaper text-[10px]"></i>
              {{ item.publisher }}</span>
            <span class="w-1 h-1 bg-slate-200 rounded-full"></span>
            <span class="flex items-center gap-1.5"><i class="fa-regular fa-clock text-[10px]"></i> {{ item.time
              }}</span>
          </div>
          <h3
            class="text-2xl md:text-3xl font-outfit font-extrabold text-slate-900 group-hover:text-primary-600 transition-colors mb-4 leading-snug">
            {{ item.title }}</h3>
          <p class="text-slate-500 font-medium leading-relaxed mb-6">{{ item.desc }}</p>
        </div>

        <div class="flex items-center justify-between pt-6 border-t border-slate-50">
          <div class="flex -space-x-2">
            <div
              class="w-8 h-8 rounded-full border-2 border-white bg-slate-100 flex items-center justify-center overflow-hidden">
              <img src="https://i.pravatar.cc/100?u=1" alt="">
            </div>
            <div
              class="w-8 h-8 rounded-full border-2 border-white bg-slate-200 flex items-center justify-center overflow-hidden">
              <img src="https://i.pravatar.cc/100?u=2" alt="">
            </div>
            <div
              class="w-8 h-8 rounded-full border-2 border-white bg-slate-900 flex items-center justify-center text-[10px] text-white font-bold italic">
              +24</div>
          </div>
          <a href="{{ item.link }}" target="_blank"
            class="flex items-center gap-2 text-primary-600 font-bold hover:gap-4 transition-all group/link">
            <span data-key="news_read_more">Read Detailed Story</span>
            <i class="fa-solid fa-arrow-right-long transition-transform"></i>
          </a>
        </div>
      </div>
    </article>
    {% endfor %}
  </div>

  <!-- Load More Simulation -->
  <div class="mt-16 text-center">
    <button
      class="px-8 py-3 bg-slate-100 text-slate-600 rounded-xl font-bold hover:bg-slate-200 transition-all border border-slate-200"
      data-key="news_load_more">
      Load More Articles
    </button>
  </div>
</section>
{% endblock %}