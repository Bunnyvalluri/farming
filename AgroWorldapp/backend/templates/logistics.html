{% extends "base.html" %}

{% block content %}
<section class="py-20 md:py-32 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto min-h-screen">
  <div class="mb-24 text-center max-w-3xl mx-auto">
    <div
      class="inline-flex items-center gap-3 px-5 py-2 bg-slate-100 text-slate-500 rounded-2xl text-[10px] font-black uppercase tracking-[0.3em] mb-8 border border-slate-200/50">
      <i class="fa-solid fa-network-wired text-primary-500"></i> Direct Exchange Node
    </div>
    <h1 class="text-5xl md:text-7xl lg:text-8xl font-black text-slate-900 mb-8 tracking-tighter leading-[0.9]"
      data-key="log_title">
      Supply Chain <br>
      <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary-600 to-emerald-600">
        Marketplace
      </span>
    </h1>
    <p class="text-lg md:text-2xl text-slate-500 font-medium leading-relaxed opacity-80" data-key="log_desc">
      Eliminate intermediaries. Connect directly with verified industrial suppliers and high-efficiency transport
      networks.
    </p>
  </div>

  <!-- Tabbed Navigation -->
  <div class="flex justify-center mb-24">
    <div
      class="inline-flex p-2 bg-slate-100/80 backdrop-blur-xl rounded-[2.5rem] border border-slate-200/50 shadow-inner">
      <button id="btnMfg" onclick="showTab('mfg')"
        class="tab-btn active px-10 py-4 rounded-[2rem] font-black text-xs uppercase tracking-widest transition-all duration-500 flex items-center gap-3 group"
        data-key="tab_mfg">
        <i class="fa-solid fa-seedling text-base group-hover:rotate-[360deg] transition-transform duration-700"></i>
        Industrial Suppliers
      </button>
      <button id="btnTrans" onclick="showTab('trans')"
        class="tab-btn px-10 py-4 rounded-[2rem] font-black text-xs uppercase tracking-widest text-slate-500 hover:text-slate-900 transition-all duration-500 flex items-center gap-3 group"
        data-key="tab_trans">
        <i class="fa-solid fa-truck-fast text-base group-hover:rotate-[360deg] transition-transform duration-700"></i>
        Transport Logistics
      </button>
    </div>
  </div>

  <!-- Manufacturers Tab -->
  <div id="tabMfg" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 lg:gap-14">
    <!-- Card 1 -->
    <div
      class="group bg-white rounded-[4rem] p-10 md:p-12 border border-slate-100 shadow-sm hover:shadow-[0_64px_160px_-24px_rgba(0,0,0,0.1)] transition-all duration-700 relative overflow-hidden flex flex-col">

      <div
        class="absolute inset-0 opacity-[0.03] group-hover:opacity-[0.06] transition-opacity duration-700 pointer-events-none"
        style="background-image: radial-gradient(#000 1px, transparent 1px); background-size: 32px 32px;">
      </div>

      <div class="flex justify-between items-start mb-12 relative z-10">
        <div
          class="px-5 py-2 bg-emerald-50 text-emerald-600 rounded-xl text-[10px] font-black uppercase tracking-widest border border-emerald-100/50 flex items-center gap-2">
          <span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.8)]"></span>
          Verified Asset
        </div>
        <div
          class="w-16 h-16 bg-slate-50 text-primary-600 rounded-2xl flex items-center justify-center text-2xl shadow-inner group-hover:scale-110 group-hover:bg-primary-50 transition-all duration-700">
          <i class="fa-solid fa-dna"></i>
        </div>
      </div>

      <h3 class="text-3xl font-black text-slate-900 tracking-tight mb-4 group-hover:text-primary-600 transition-colors">
        Krishi Bio-Tech</h3>
      <p class="text-slate-500 text-base font-medium leading-relaxed mb-10 opacity-90">
        Pioneering climate-resilient genomic structures for high-yield cereal production.
      </p>

      <div class="space-y-6 py-10 border-t border-slate-50 mb-10 mt-auto">
        <div class="flex items-center gap-5 text-slate-400 group-hover:text-slate-600 transition-colors">
          <div class="w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center border border-slate-100">
            <i class="fa-solid fa-location-dot text-primary-500 text-sm"></i>
          </div>
          <span class="text-[11px] font-black uppercase tracking-widest">Pune, MH (SEC04)</span>
        </div>
        <div class="flex items-center gap-5 text-slate-400 group-hover:text-slate-600 transition-colors">
          <div class="w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center border border-slate-100">
            <i class="fa-solid fa-tag text-primary-500 text-sm"></i>
          </div>
          <span class="text-[11px] font-black uppercase tracking-widest">Starts ₹1,450 <span class="opacity-40">/
              MQ</span></span>
        </div>
      </div>

      <button onclick="openChat('Krishi Bio-Tech')"
        class="w-full py-5 bg-slate-900 text-white rounded-[1.5rem] font-black text-[12px] uppercase tracking-widest hover:bg-slate-800 shadow-2xl transition-all active:scale-95 flex items-center justify-center gap-3">
        <i class="fa-solid fa-message text-[10px] opacity-50"></i>
        <span data-key="btn_msg">Secure Connection</span>
      </button>
    </div>

    <!-- Card 2 -->
    <div
      class="group bg-white rounded-[4rem] p-10 md:p-12 border border-slate-100 shadow-sm hover:shadow-[0_64px_160px_-24px_rgba(0,0,0,0.1)] transition-all duration-700 relative overflow-hidden flex flex-col">

      <div
        class="absolute inset-0 opacity-[0.03] group-hover:opacity-[0.06] transition-opacity duration-700 pointer-events-none"
        style="background-image: radial-gradient(#000 1px, transparent 1px); background-size: 32px 32px;">
      </div>

      <div class="flex justify-between items-start mb-12 relative z-10">
        <div
          class="px-5 py-2 bg-emerald-50 text-emerald-600 rounded-xl text-[10px] font-black uppercase tracking-widest border border-emerald-100/50 flex items-center gap-2">
          <span class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(16,185,129,0.8)]"></span>
          Verified Asset
        </div>
        <div
          class="w-16 h-16 bg-slate-50 text-primary-600 rounded-2xl flex items-center justify-center text-2xl shadow-inner group-hover:scale-110 group-hover:bg-primary-50 transition-all duration-700">
          <i class="fa-solid fa-flask-vial"></i>
        </div>
      </div>

      <h3 class="text-3xl font-black text-slate-900 tracking-tight mb-4 group-hover:text-primary-600 transition-colors">
        Nexus Organics</h3>
      <p class="text-slate-500 text-base font-medium leading-relaxed mb-10 opacity-90">
        Advanced molecular nutrition for commercial-scale sustainable cultivation.
      </p>

      <div class="space-y-6 py-10 border-t border-slate-50 mb-10 mt-auto">
        <div class="flex items-center gap-5 text-slate-400 group-hover:text-slate-600 transition-colors">
          <div class="w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center border border-slate-100">
            <i class="fa-solid fa-location-dot text-primary-500 text-sm"></i>
          </div>
          <span class="text-[11px] font-black uppercase tracking-widest">Nashik, MH (IND09)</span>
        </div>
        <div class="flex items-center gap-5 text-slate-400 group-hover:text-slate-600 transition-colors">
          <div class="w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center border border-slate-100">
            <i class="fa-solid fa-tag text-primary-500 text-sm"></i>
          </div>
          <span class="text-[11px] font-black uppercase tracking-widest">Starts ₹1,200 <span class="opacity-40">/
              unit</span></span>
        </div>
      </div>

      <button onclick="openChat('Nexus Organics')"
        class="w-full py-5 bg-slate-900 text-white rounded-[1.5rem] font-black text-[12px] uppercase tracking-widest hover:bg-slate-800 shadow-2xl transition-all active:scale-95 flex items-center justify-center gap-3">
        <i class="fa-solid fa-message text-[10px] opacity-50"></i>
        <span data-key="btn_msg">Secure Connection</span>
      </button>
    </div>
  </div>

  <!-- Transporters Tab (Initially Hidden) -->
  <div id="tabTrans" class="hidden grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 lg:gap-14">
    <!-- Card 1 -->
    <div
      class="group bg-white rounded-[4rem] p-10 md:p-12 border border-slate-100 shadow-sm hover:shadow-[0_64px_160px_-24px_rgba(0,0,0,0.1)] transition-all duration-700 relative overflow-hidden flex flex-col">

      <div
        class="absolute inset-0 opacity-[0.03] group-hover:opacity-[0.06] transition-opacity duration-700 pointer-events-none"
        style="background-image: radial-gradient(#000 1px, transparent 1px); background-size: 32px 32px;">
      </div>

      <div class="flex justify-between items-start mb-12 relative z-10">
        <div
          class="px-5 py-2 bg-blue-50 text-blue-600 rounded-xl text-[10px] font-black uppercase tracking-widest border border-blue-100/50 flex items-center gap-2">
          <i class="fa-solid fa-bolt text-[8px]"></i> Priority Fleet
        </div>
        <div
          class="w-16 h-16 bg-slate-50 text-blue-600 rounded-2xl flex items-center justify-center text-2xl shadow-inner group-hover:scale-110 group-hover:bg-blue-50 transition-all duration-700">
          <i class="fa-solid fa-truck"></i>
        </div>
      </div>

      <h3 class="text-3xl font-black text-slate-900 tracking-tight mb-4 group-hover:text-blue-600 transition-colors">
        Ramesh Cargo</h3>
      <p class="text-slate-500 text-base font-medium leading-relaxed mb-10 opacity-90">
        Agile regional logistics specializing in temperature-controlled perishables.
      </p>

      <div class="space-y-6 py-10 border-t border-slate-50 mb-10 mt-auto">
        <div class="flex items-center gap-5 text-slate-400 group-hover:text-slate-600 transition-colors">
          <div class="w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center border border-slate-100">
            <i class="fa-solid fa-weight-hanging text-blue-500 text-sm"></i>
          </div>
          <span class="text-[11px] font-black uppercase tracking-widest">Capacity: 2.5 Tons</span>
        </div>
        <div class="flex items-center gap-5 text-slate-400 group-hover:text-slate-600 transition-colors">
          <div class="w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center border border-slate-100">
            <i class="fa-solid fa-route text-blue-500 text-sm"></i>
          </div>
          <span class="text-[11px] font-black uppercase tracking-widest">Rate: ₹15 <span class="opacity-40">/
              km</span></span>
        </div>
      </div>

      <button onclick="openChat('Ramesh Cargo')"
        class="w-full py-5 bg-blue-600 text-white rounded-[1.5rem] font-black text-[12px] uppercase tracking-widest hover:bg-blue-700 shadow-2xl transition-all active:scale-95 flex items-center justify-center gap-3">
        <i class="fa-solid fa-headset text-[10px] opacity-50"></i>
        <span data-key="btn_contact">Establish Protocol</span>
      </button>
    </div>
  </div>

  <!-- Chat Modal Component -->
  <div id="chatModal" class="fixed bottom-10 right-10 w-full max-w-[420px] hidden z-[100] transition-all duration-500">
    <div
      class="bg-white/80 backdrop-blur-3xl rounded-[3.5rem] shadow-[0_64px_160px_-32px_rgba(0,0,0,0.3)] border border-white/20 overflow-hidden flex flex-col h-[650px]">
      <!-- Chat Header -->
      <div class="bg-slate-950 text-white p-10 flex justify-between items-center shrink-0">
        <div class="flex items-center gap-6">
          <div class="relative">
            <div
              class="w-16 h-16 bg-primary-600 rounded-[1.5rem] flex items-center justify-center font-black text-2xl shadow-xl shadow-primary-900/40">
              A</div>
            <div
              class="absolute -top-1 -right-1 w-5 h-5 bg-emerald-500 border-4 border-slate-950 rounded-full shadow-lg">
            </div>
          </div>
          <div>
            <h4 id="chatTitle" class="text-xl font-black tracking-tight leading-tight">System Node</h4>
            <div class="flex items-center gap-2 mt-1">
              <span class="w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"></span>
              <p class="text-[10px] text-emerald-500 font-black uppercase tracking-[0.2em]">Active Link</p>
            </div>
          </div>
        </div>
        <button onclick="document.getElementById('chatModal').classList.add('hidden')"
          class="w-12 h-12 rounded-2xl bg-white/5 hover:bg-white/10 transition-all flex items-center justify-center border border-white/10">
          <i class="fa-solid fa-xmark text-lg"></i>
        </button>
      </div>

      <!-- Messages Area -->
      <div id="chatBox" class="grow p-8 overflow-y-auto flex flex-col gap-6 scroll-smooth">
        <div id="chatWelcome"
          class="bg-white p-6 rounded-[2rem] rounded-tl-none shadow-sm border border-slate-100 text-slate-600 text-sm font-medium max-w-[85%] leading-relaxed">
          Establishing secure link... Authentication verified. How can we facilitate your industrial requirements?
        </div>
      </div>

      <!-- Input Area -->
      <div class="p-8 bg-white border-t border-slate-50 shrink-0">
        <div class="flex gap-4 items-center">
          <input type="text" id="chatInput" placeholder="Enter transmission..."
            onkeydown="if(event.key === 'Enter') sendMessage()"
            class="grow px-8 py-5 bg-slate-50 border-none rounded-2xl focus:ring-4 focus:ring-primary-100 transition-all outline-none text-sm font-bold shadow-inner h-16">
          <button onclick="sendMessage()"
            class="w-16 h-16 bg-slate-900 text-white rounded-2xl flex items-center justify-center hover:bg-slate-800 transition-all shadow-xl active:scale-90">
            <i class="fa-solid fa-paper-plane text-base"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script>
  function showTab(type) {
    const isMfg = type === 'mfg';
    document.getElementById('tabMfg').classList.toggle('hidden', !isMfg);
    document.getElementById('tabTrans').classList.toggle('hidden', isMfg);
    document.getElementById('tabTrans').classList.toggle('grid', !isMfg);

    const btnMfg = document.getElementById('btnMfg');
    const btnTrans = document.getElementById('btnTrans');

    if (isMfg) {
      btnMfg.className = "px-8 py-3 rounded-full font-bold transition-all duration-300 flex items-center gap-2 group bg-primary-600 text-white shadow-lg shadow-primary-600/20";
      btnTrans.className = "px-8 py-3 rounded-full font-bold text-slate-500 hover:text-slate-700 transition-all duration-300 flex items-center gap-2 group";
    } else {
      btnTrans.className = "px-8 py-3 rounded-full font-bold transition-all duration-300 flex items-center gap-2 group bg-blue-600 text-white shadow-lg shadow-blue-600/20";
      btnMfg.className = "px-8 py-3 rounded-full font-bold text-slate-500 hover:text-slate-700 transition-all duration-300 flex items-center gap-2 group";
    }
  }

  function openChat(name) {
    const modal = document.getElementById('chatModal');
    modal.classList.remove('hidden');
    document.getElementById('chatTitle').innerText = name;

    const welcomes = {
      'en': 'Namaste! How can we assist you with your logistics need today?',
      'hi': 'नमस्ते! ट्रांसपोर्ट या बीज के बारे में हम आज आपकी क्या मदद कर सकते हैं?',
      'te': 'నమస్తే! ఈ రోజు లాజిస్టిక్స్ పనుల్లో మేము మీకు ఎలా సహాయం చేయగలం?'
    };
    document.getElementById('chatWelcome').innerText = welcomes[currentLang] || welcomes['en'];
    document.getElementById('chatInput').focus();
  }

  function sendMessage() {
    const input = document.getElementById('chatInput');
    const msg = input.value.trim();
    if (!msg) return;

    const chatBox = document.getElementById('chatBox');

    // User Msg
    const userDiv = document.createElement('div');
    userDiv.className = "bg-primary-600 text-white p-4 rounded-2xl rounded-tr-none shadow-md text-sm font-bold self-end max-w-[85%] animate-[toastIn_0.3s_ease-out]";
    userDiv.innerText = msg;
    chatBox.appendChild(userDiv);

    input.value = '';
    chatBox.scrollTop = chatBox.scrollHeight;

    // Simulation of response
    setTimeout(() => {
      const replies = {
        'en': "Thank you for your message. Our representative will get back to you within 15 minutes.",
        'hi': "धन्यवाद, हमारी टीम जल्द ही आपसे संपर्क करेगी।",
        'te': "ధన్యవాదాలు, మా ప్రతినిధి 15 నిమిషాల్లో మిమ్మల్ని సంప్రదిస్తారు."
      };
      const replyText = replies[currentLang] || replies['en'];
      const replyDiv = document.createElement('div');
      replyDiv.className = "bg-white p-4 rounded-2xl rounded-tl-none shadow-sm border border-slate-100 text-slate-600 text-sm font-medium max-w-[85%] animate-[toastIn_0.3s_ease-out]";
      replyDiv.innerText = replyText;
      chatBox.appendChild(replyDiv);
      chatBox.scrollTop = chatBox.scrollHeight;
    }, 1200);
  }
</script>
<style>
  .tab-btn.active {
    pointer-events: none;
  }
</style>
{% endblock %}